<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- <link rel="stylesheet" href="default.css"> -->

    <link rel="shortcut icon" href="/favicon.ico">

    <title>Minesweeper v.0.01.html</title>

    <style>
        html,
        body {
            height: 100%;
            margin: 0px;
            padding: 0px;
            overflow: hidden;
            /* border: 1px solid black; */
        }

        canvas {
            /* border: 1px solid red; */
            margin: 0;
            padding: 0;
        }
    </style>

    <script src="commons.js"></script>
    <script src="output.js"></script>
    <script src="input.js"></script>
    <script src="2d.js"></script>
    <script src="model.js"></script>
    <script src="view.js"></script>
    <script src="controller.js"></script>


    <script>
        ////////////////////////////////////////////////////////// index.html ///////////////////////////////////////////////////////////////////////////////////////////////////////////// 
        'use strict';


        //globals
        let modelArr = null;
        let setOfAutoclickeddSquares = new Set();
        let clickLevel = 0;
        let ctx = null;
        let canvas = null;
        let END_X = -1
        let END_Y = -1
        const TIMELOUT_OF_UPDATE_IN_MS = Infinity;//0;
        let currX = -1;
        let currY = -1;
        let currR = -1;
        const FIELD_WIDTH = getUrlParam('width') ? Number(getUrlParam('width')) : 10
        const FIELD_HEIGHT = getUrlParam('height') ? Number(getUrlParam('height')) : 10
        const NUMBER_OF_MINES = getUrlParam('numberOfMines') ? Number(getUrlParam('numberOfMines')) : 18  //2; //899
        const START_SQWARE_IMG = 'img/start-square.jpg'
        const MINE_SQWARE_IMG = 'img/mine-square.jpg'
        const MARKED_SQWARE_IMG = 'img/marked-square.jpg'
        const FALSELY_MARKED_SQWARE_IMG = 'img/falsely-marked-square.jpg'
        const EMPTY_SQWARE_IMG = 'img/empty-square.jpg'
        const EMPTY_SQWARE_WITH_NUMBER_IMG_FIRST_PART = 'img/empty-square-'
        const EMPTY_SQWARE_WITH_NUMBER_IMG_LAST_PART = '.jpg'
        const COMMA = ',';
        let minesLeft = NUMBER_OF_MINES;
        let isGameOver = false;



        function init() {

            // alert('in init()' +  getUrlParam('width'))

            // canvas = document.getElementById('canvas');
            // ctx = canvas.getContext('2d');
            // END_X = canvas.width = parseInt(document.body.clientWidth); //document.width is obsolete
            // END_Y = canvas.height = parseInt(document.body.clientHeight)  //document.height is obsolete
            // ctx.translate(0, canvas.height);
            // ctx.scale(1, -1);

            initModel();
            draw();

            // document.addEventListener("dblclick", (e) => {
            //     // card.classList.toggle("large");
            //     alert(e)
            // });


            document.addEventListener("contextmenu", (e) => {
                // card.classList.toggle("large");
                stopEvent(e)
            });



            //UPDATES:
            setInterval(() => {
                //         clearCanvas();
                // draw()
            }, TIMELOUT_OF_UPDATE_IN_MS);

        }



    </script>

</head>



<body onload="init()" onresize="location.reload()"
    style="display:inline;  Font-Size:0px; Line-Height: 0px; width:30px;height:30px;margin: 0px;  padding: 0px;border: none;">
    <!-- <canvas id="canvas" style="padding: 0; margin:0"></canvas> -->
    <div id="minesLeftDivId" style="font-size: 50PX;float: right;margin: 10px;  padding: 10px;"> left: <span
            id="spanWithNumberOfminesLeftId">
            <script> w(minesLeft)   </script>
        </span> <br> </div>

    <div id="fieldDivId"></div>
</body>

</html>